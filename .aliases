# ============================================================================
# ZSH Aliases - Simple Shortcuts
# ============================================================================
# Complex functions have been migrated to ~/.config/zsh/functions/
# Use `zf-list` to see all available functions
# ============================================================================

# Quick navigation
alias ddev='cd ~/Dev'
alias ddot='cd ~/Dev/dotfiles'
alias dz='cd ~/dev/z'
alias dh='cd ~'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# Episodic memory
alias episodic-memory='~/.claude/plugins/cache/episodic-memory/cli/episodic-memory'

# File operations
alias fname='find . -iname'
alias o='open'
alias oo='open .'
alias v='vim'
alias exclude='vim .git/info/exclude'

# System utilities
alias hosts='sudo vim /etc/hosts'
alias sudo='sudo '
alias reload='exec $SHELL -l'
alias sep="echo '------------------->'"
alias todo="ultralist"

# Network utilities
alias ip='dig +short myip.opendns.com @resolver1.opendns.com'
alias ips="ifconfig -a | perl -nle'/(\d+\.\d+\.\d+\.\d+)/ && print $1'"
alias ifactive="ifconfig | pcregrep -M -o '^[^\t:]+:([^\n]|\n\t)*status: active'"
alias listpi='lsof -P -i -n'
alias listpo='lsof -Pni4 | grep LISTEN | column -t'
alias sniff="sudo ngrep -d 'en1' -t '^(GET|POST) ' 'tcp and port 80'"
alias httpdump="sudo tcpdump -i en1 -n -s 0 -w - | grep -a -o -E \"Host\: .*|GET \/.*\""

# Security/Crypto
alias genkey='openssl req -newkey rsa:2048 -new -nodes -x509 -days 3650 -subj "/C=US/ST=Denial/L=Springfield/O=Dis/CN=localhost" -keyout key.pem -out cert.pem'
alias pubkey="more ~/.ssh/id_ed25519.pub | pbcopy | echo '=> Public key copied to pasteboard.'"

# Text utilities
alias ccat='pygmentize -g'
alias urldecode='python -c "import sys, urllib as ul; print ul.unquote_plus(sys.argv[1])"'
alias urlencode='python -c "import sys, urllib as ul; print ul.quote_plus(sys.argv[1])"'

# Simple hash function
sha1() {
  echo -n "$1" | shasum -a 1 | awk '{print $1}' | pbcopy
}

# System updates
alias update='sudo softwareupdate -i -a; brew update; brew upgrade; brew cleanup; brew cu; zinit update;'
alias vimup='vim +PlugUpgrade +PlugUpdate +qa!'

# macOS desktop
alias hidedesktop="defaults write com.apple.finder CreateDesktop -bool false && killall Finder"
alias showdesktop="defaults write com.apple.finder CreateDesktop -bool true && killall Finder"
alias afk="/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend"

# Git shortcuts (simple aliases)
alias g='git'
alias ga='git add --all .'
alias gc='git commit'
alias gco='git checkout'
alias gam='git commit --amend --no-edit'
alias gp='git remote prune origin'
alias gl="git log --graph --pretty=format:'%Cred%h%Creset %an: %s - %Creset %C(yellow)%d%Creset %Cgreen(%cr)%Creset' --abbrev-commit --date=relative"
alias gs='git status -sb'
alias gurl='git config --get remote.origin.url'
alias gclean='git branch | grep -v "master\|main" | xargs git branch -D'
alias gb='git branch --show-current | pbcopy && echo "Copied branch name: $(git branch --show-current)"'

# GitHub CLI shortcuts
alias trav='git-trav'
alias repo='gh repo view --web'
alias issues="gh issue list --web"
alias prs="gh pr list --web"
alias pr="gh pr create --web"
alias me="open 'https://github.com/luhmann'"
alias repos="open 'https://github.com/luhmann?tab=repositories'"
alias stars="open 'https://github.com/luhmann?tab=stars'"

# Dev shortcuts
alias yt="yarn test"
alias ys="yarn start"
alias kn="killall node"
alias gw='./gradlew'
alias nukenm="find . -name \"node_modules\" -exec rm -rf '{}' +"
alias cc='code .'

# Tool remapping for better experience
alias cat='bat'
alias ll='eza -lag'
# Commented because it breaks other tools that use find:
# alias find='fd'
alias rg='rg --smart-case --hidden'
alias grep='rg'

# Backup patch to cloud
pcloud() {
  git diff > /Users/jfd/Library/Mobile\ Documents/com~apple~CloudDocs/patches/"$1".patch
}

# Load asdf when needed
load_asdf() {
  . $(brew --prefix asdf)/libexec/asdf.sh
}

# Simple utility functions
cloc() {
  git ls-files --exclude-standard -- ':!:**/*.[pjs][npv]g' ':!:**/*.ai' ':!:.idea' ':!:**/*.eslintrc' ':!:package-lock.json' | xargs wc -l
}

timezsh() {
  shell=${1-$SHELL}
  for i in $(seq 1 10); do /usr/bin/time $shell -i -c exit; done
}

# Docker helpers
build_dockerfile() {
  docker build . -t $1 -f ./Dockerfile
}

run_dockerfile() {
  docker run -d $1
}

docker-run-interactive() {
  docker run -it --entrypoint "" -e AWS_PROFILE=${AWS_PROFILE} -v $(pwd):/app -v ${HOME}/.aws:/root/.aws --platform=linux/amd64 "$1" sh -c "cd /app/; sh"
}

# Image to data URL
img-data() {
  TYPE=$(file --mime-type -b $1)
  ENC=$(base64 $1)
  echo "data:$TYPE;base64,$ENC"
}

# MediaConvert helper
getTranscodingsSinceHours() {
  local sinceHours=${1:-24}
  echo "Querying MediaConvert jobs in past ${sinceHours} hours..."
  AWS_REGION=us-east-1 aws mediaconvert list-jobs --max-items 100 \
  --query "Jobs[?to_string(Timing.FinishTime) > '$(date "-v-${sinceHours}H" "+%Y-%m-%dT%H:%M:%S+00:00")'].{isrc:UserMetadata.concert_isrc,finishTime:Timing.FinishTime,status:Status,audioRenditions:join(',',Settings.OutputGroups[].Outputs[].AudioDescriptions[].CodecSettings.Codec)}" \
  --output table
}

# AI Agent tmux sessions
ac() { tmux new-session -s agent-claude "claude $*"; }
ap() { tmux new-session -s agent-pi "pi $*"; }
alias cac='tmux attach-session -t agent-claude'
alias cap='tmux attach-session -t agent-pi'

# Claude Code autonomous mode (sandboxed)
alias zc='claude --dangerously-skip-permissions'

# ============================================================================
# Complex functions have been moved to ~/.config/zsh/functions/
#
# Migrated functions (use zf-list to see all):
# - Git: fbr, fshow, com, gitstash, gitstashapply, sync-git-origins, gtw, rmwt, unwip
# - Docker: da, ds
# - Network: curl-time, perf, rh
# - Web: cheat, weather, chrome-history
# - System: fkill, histrm
# - File: fe
# - Text: pb-quote, lines-to-csv
# - Dev: node-project
#
# Use `zf-browse` for interactive search
# Use `zf-help` for more information
# ============================================================================
